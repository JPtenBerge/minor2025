@page "/IntWebAssembly"
@using BlazorApp1.Client.Components
@using Demo.Shared.Dal
@rendermode InteractiveWebAssembly
@inject IPersonDal PersonDal

<h3>Interactive WebAssembly</h3>

Renderer: @RendererInfo.Name<br/>
IsInteractive: @RendererInfo.IsInteractive

@if (Persons is not null)
{
    <Autocompleter T="Person" Data="Persons" OnSelect="HandleSelection" @rendermode="InteractiveWebAssembly">
        <SuggestionTemplate Context="person">
            @person.Name verwacht een @person.ExpectedScore
        </SuggestionTemplate>
    </Autocompleter>
}

@code {
    [PersistentState]
    public List<Person>? Persons { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Persons ??= (await PersonDal.GetPersonsAsync()).ToList();
    }

    void HandleSelection(Person person)
    {
        Console.WriteLine($"Hey er is iets geselecteerd! {person.Name}");
    }

}